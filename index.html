<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Learning Portal</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .hide { display: none; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 antialiased overflow-hidden">

    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside id="sidebar" class="fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out">
            <div class="flex items-center justify-center h-16 border-b border-gray-100">
                <div class="flex items-center space-x-2">
                    <i data-lucide="graduation-cap" class="text-blue-600 w-8 h-8"></i>
                    <span class="text-xl font-bold text-gray-900">EduPortal</span>
                </div>
                <button id="closeSidebar" class="md:hidden absolute right-4 text-gray-500">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <div class="p-4">
                <div class="flex items-center p-3 mb-6 bg-blue-50 rounded-xl">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Alex" alt="User" class="w-10 h-10 rounded-full border-2 border-white shadow-sm">
                    <div class="ml-3">
                        <p class="text-sm font-bold text-gray-900">Alex Johnson</p>
                        <p class="text-xs text-blue-600 font-medium">10th Grade</p>
                    </div>
                </div>

                <nav class="space-y-1">
                    <a href="#" onclick="showPage('dashboard')" id="nav-dashboard" class="nav-item flex items-center px-4 py-3 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg">
                        <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i>
                        Dashboard
                    </a>
                    <a href="#" onclick="showPage('courses')" id="nav-courses" class="nav-item flex items-center px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-blue-600 rounded-lg transition-colors">
                        <i data-lucide="book-open" class="w-5 h-5 mr-3"></i>
                        My Courses
                    </a>
                    <a href="#" onclick="showPage('assignments')" id="nav-assignments" class="nav-item flex items-center px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-blue-600 rounded-lg transition-colors">
                        <i data-lucide="check-square" class="w-5 h-5 mr-3"></i>
                        Assignments
                        <span class="ml-auto bg-red-100 text-red-600 py-0.5 px-2 rounded-full text-xs font-bold">3</span>
                    </a>
                    <a href="#" onclick="showPage('resources')" id="nav-resources" class="nav-item flex items-center px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-blue-600 rounded-lg transition-colors">
                        <i data-lucide="library" class="w-5 h-5 mr-3"></i>
                        Resources
                    </a>
                </nav>
            </div>
            
            <div class="absolute bottom-0 w-full p-4 border-t border-gray-100">
                <a href="#" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 hover:text-red-600 transition-colors">
                    <i data-lucide="log-out" class="w-5 h-5 mr-3"></i>
                    Sign Out
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 ml-0 md:ml-64 h-full overflow-y-auto">
            <!-- Header -->
            <header class="sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-200 px-6 py-4 flex justify-between items-center">
                <button id="openSidebar" class="md:hidden text-gray-600">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
                <h2 id="pageTitle" class="text-xl font-bold text-gray-800 ml-4 md:ml-0">Dashboard</h2>
                <div class="flex items-center space-x-4">
                    <div class="relative hidden sm:block">
                        <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"></i>
                        <input type="text" placeholder="Search..." class="pl-10 pr-4 py-2 border border-gray-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64">
                    </div>
                    <button class="relative p-2 text-gray-400 hover:text-blue-600 transition-colors">
                        <i data-lucide="bell" class="w-6 h-6"></i>
                        <span class="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border border-white"></span>
                    </button>
                </div>
            </header>

            <!-- Page Content -->
            <div class="p-6 md:p-8 max-w-7xl mx-auto pb-20">
                
                <!-- Dashboard View -->
                <div id="dashboard" class="page-view fade-in">
                    <!-- Welcome Banner -->
                    <div class="bg-gradient-to-r from-blue-600 to-indigo-700 rounded-2xl p-8 text-white shadow-lg mb-8 relative overflow-hidden">
                        <div class="relative z-10">
                            <h1 class="text-3xl font-bold mb-2">Welcome back, Alex! ðŸ‘‹</h1>
                            <p class="text-blue-100 text-lg mb-6">You have 3 assignments pending and 1 upcoming exam.</p>
                            <button onclick="showPage('assignments')" class="bg-white text-blue-600 px-6 py-2.5 rounded-full font-semibold shadow hover:bg-blue-50 transition-colors">
                                View Assignments
                            </button>
                        </div>
                        <div class="absolute right-0 top-0 h-full w-1/3 bg-white/10 transform skew-x-12 translate-x-10"></div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center">
                            <div class="p-3 bg-green-100 text-green-600 rounded-full mr-4">
                                <i data-lucide="clock" class="w-6 h-6"></i>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Study Time</p>
                                <h3 class="text-2xl font-bold">12h 45m</h3>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center">
                            <div class="p-3 bg-purple-100 text-purple-600 rounded-full mr-4">
                                <i data-lucide="book-open" class="w-6 h-6"></i>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Courses in Progress</p>
                                <h3 class="text-2xl font-bold">4</h3>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center">
                            <div class="p-3 bg-orange-100 text-orange-600 rounded-full mr-4">
                                <i data-lucide="award" class="w-6 h-6"></i>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Average Grade</p>
                                <h3 class="text-2xl font-bold">B+</h3>
                            </div>
                        </div>
                    </div>

                    <h3 class="text-lg font-bold text-gray-800 mb-4">Current Progress</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="dashboard-courses-container">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Courses View -->
                <div id="courses" class="page-view hide fade-in">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="all-courses-container">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Assignments View -->
                <div id="assignments" class="page-view hide fade-in">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full text-left border-collapse">
                                <thead class="bg-gray-50 border-b border-gray-200">
                                    <tr>
                                        <th class="px-6 py-4 text-xs font-semibold text-gray-500 uppercase">Status</th>
                                        <th class="px-6 py-4 text-xs font-semibold text-gray-500 uppercase">Assignment</th>
                                        <th class="px-6 py-4 text-xs font-semibold text-gray-500 uppercase">Course</th>
                                        <th class="px-6 py-4 text-xs font-semibold text-gray-500 uppercase">Due Date</th>
                                        <th class="px-6 py-4 text-xs font-semibold text-gray-500 uppercase">Action</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-100" id="assignments-table-body">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Resources View -->
                <div id="resources" class="page-view hide fade-in">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="resources-container">
                        <!-- Populated by JS -->
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Video Modal -->
    <div id="videoModal" class="fixed inset-0 z-[60] hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <!-- Background overlay -->
            <div class="fixed inset-0 transition-opacity bg-gray-900 bg-opacity-75" aria-hidden="true" onclick="closeVideoModal()"></div>

            <!-- This element is to trick the browser into centering the modal contents. -->
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <!-- Modal panel -->
            <div class="inline-block w-full overflow-hidden text-left align-bottom transition-all transform bg-white shadow-xl rounded-2xl sm:my-8 sm:align-middle sm:max-w-4xl">
                <div class="bg-white">
                    <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-bold text-gray-900" id="modal-title">Course Video</h3>
                        <button type="button" class="text-gray-400 transition-colors hover:text-gray-600" onclick="closeVideoModal()">
                            <span class="sr-only">Close</span>
                            <i data-lucide="x" class="w-6 h-6"></i>
                        </button>
                    </div>
                    
                    <div class="relative w-full bg-black aspect-video">
                        <video id="courseVideoPlayer" class="w-full h-full" controls>
                            <source src="" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    
                    <div class="px-6 py-4">
                        <h4 class="mb-2 text-lg font-semibold text-gray-900" id="videoCourseTitle">Course Title</h4>
                        <p id="videoDescription" class="text-sm text-gray-600">
                            <!-- Description goes here -->
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Data ---
        const courses = [
            {
                id: 1,
                title: "Advanced Mathematics",
                instructor: "Dr. Sarah Smith",
                progress: 75,
                image: "https://images.unsplash.com/photo-1635070041078-e363dbe005cb?auto=format&fit=crop&q=80&w=400",
                color: "text-blue-600",
                bg: "bg-blue-100"
            },
            {
                id: 2,
                title: "Physics: Mechanics",
                instructor: "Prof. Albert D.",
                progress: 45,
                image: "https://images.unsplash.com/photo-1636466497217-26a8cbeaf0aa?auto=format&fit=crop&q=80&w=400",
                color: "text-purple-600",
                bg: "bg-purple-100"
            },
            {
                id: 3,
                title: "World History",
                instructor: "Ms. Elena R.",
                progress: 90,
                image: "https://images.unsplash.com/photo-1461360370896-922624d12aa1?auto=format&fit=crop&q=80&w=400",
                color: "text-amber-600",
                bg: "bg-amber-100"
            },
            {
                id: 4,
                title: "Computer Science 101",
                instructor: "Mr. David Code",
                progress: 30,
                image: "https://images.unsplash.com/photo-1517694712202-14dd9538aa97?auto=format&fit=crop&q=80&w=400",
                color: "text-emerald-600",
                bg: "bg-emerald-100"
            }
        ];

        const assignments = [
            { id: 1, title: "Problem Set 4: Functions", course: "Advanced Mathematics", due: "Today", status: "Pending", priority: "High" },
            { id: 2, title: "Lab Report: Friction", course: "Physics", due: "Tomorrow", status: "Pending", priority: "Medium" },
            { id: 3, title: "Essay: Causes of WWI", course: "History", due: "In 3 days", status: "Submitted", priority: "Low" },
            { id: 4, title: "Python Project: Calculator", course: "CS 101", due: "Next Week", status: "Pending", priority: "High" }
        ];

        const resources = [
            { title: "Calculus Formula Sheet", type: "PDF", size: "2.4 MB", icon: "file-text" },
            { title: "Physics Lab Guidelines", type: "PDF", size: "1.1 MB", icon: "file" },
            { title: "History Timeline", type: "Image", size: "5.6 MB", icon: "image" },
            { title: "Intro to Python E-Book", type: "E-Book", size: "12 MB", icon: "book" }
        ];

        // --- Functions ---

        function renderCourses(containerId, limit = null) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            const dataToRender = limit ? courses.slice(0, limit) : courses;

            dataToRender.forEach(course => {
                const card = document.createElement('div');
                card.className = "bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow";
                card.innerHTML = `
                    <div class="h-32 w-full bg-cover bg-center" style="background-image: url('${course.image}')"></div>
                    <div class="p-5">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <span class="text-xs font-bold px-2 py-1 rounded-full ${course.bg} ${course.color} mb-2 inline-block">Course</span>
                                <h4 class="font-bold text-gray-800 text-lg leading-tight">${course.title}</h4>
                            </div>
                        </div>
                        <p class="text-sm text-gray-500 mb-4">${course.instructor}</p>
                        
                        <div class="flex items-center justify-between text-sm mb-1">
                            <span class="font-medium text-gray-700">${course.progress}% Complete</span>
                        </div>
                        <div class="w-full bg-gray-100 rounded-full h-2">
                            <div class="bg-blue-600 h-2 rounded-full transition-all duration-500" style="width: ${course.progress}%"></div>
                        </div>
                        <button onclick="playCourseVideo(${course.id})" class="w-full mt-4 py-2 border border-gray-200 text-gray-600 font-medium rounded-lg hover:bg-gray-50 hover:text-blue-600 transition-colors flex items-center justify-center">
                            <i data-lucide="play-circle" class="w-4 h-4 mr-2"></i> Continue Learning
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
            // Re-initialize icons for new elements
            lucide.createIcons();
        }

        function playCourseVideo(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (!course) return;

            // Set Title & Description
            document.getElementById('videoCourseTitle').innerText = course.title;
            document.getElementById('videoDescription').innerText = `Resume learning with ${course.instructor}. This session covers key concepts for the current module.`;

            // Set Video Source
            // Using a standard public domain video for demonstration (Big Buck Bunny)
            // In a real app, you would have specific URLs in the 'courses' object.
            const videoPlayer = document.getElementById('courseVideoPlayer');
            videoPlayer.src = "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"; 
            
            // Show Modal
            const modal = document.getElementById('videoModal');
            modal.classList.remove('hidden');
            
            // Auto play
            videoPlayer.play();
        }

        function closeVideoModal() {
            const modal = document.getElementById('videoModal');
            const videoPlayer = document.getElementById('courseVideoPlayer');
            
            // Pause video and reset
            videoPlayer.pause();
            videoPlayer.currentTime = 0;
            videoPlayer.src = ""; // Clear src to stop buffering
            
            modal.classList.add('hidden');
        }

        function renderAssignments() {
            const tbody = document.getElementById('assignments-table-body');
            tbody.innerHTML = '';

            assignments.forEach(assignment => {
                const tr = document.createElement('tr');
                tr.className = "hover:bg-gray-50 transition-colors";
                
                let statusBadge = '';
                if(assignment.status === 'Pending') {
                    statusBadge = `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">Pending</span>`;
                } else {
                    statusBadge = `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Submitted</span>`;
                }

                tr.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">${statusBadge}</td>
                    <td class="px-6 py-4">
                        <div class="text-sm font-medium text-gray-900">${assignment.title}</div>
                        <div class="text-xs text-gray-500">${assignment.priority} Priority</div>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-500">${assignment.course}</td>
                    <td class="px-6 py-4 text-sm text-gray-500">${assignment.due}</td>
                    <td class="px-6 py-4">
                        <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">View</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // --- Download Handler ---
        function downloadResource(title) {
            if (title === "Intro to Python E-Book") {
                // Create content for the mock Python book
                const content = `
# Introduction to Python Programming
Author: Student Portal Resources

## Chapter 1: The Basics
Python is an interpreted, high-level, general-purpose programming language. Created by Guido van Rossum and first released in 1991.

### 1.1 Hello World
To print text to the screen in Python, we use the print() function:

print("Hello, World!")

### 1.2 Variables
Variables are containers for storing data values.
x = 5
y = "John"
print(x)
print(y)

## Chapter 2: Control Flow
... (Content truncated for demo) ...
                `;
                
                // Create a blob and trigger download
                const blob = new Blob([content], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'Intro_to_Python_EBook.txt';
                document.body.appendChild(a);
                a.click();
                
                // Cleanup
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);
            } else {
                // Mock behavior for other files
                alert(`Starting download for: ${title}...\n(This is a simulation, but the Python book is real!)`);
            }
        }

        function renderResources() {
            const container = document.getElementById('resources-container');
            container.innerHTML = '';

            resources.forEach(res => {
                const item = document.createElement('div');
                item.className = "bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex flex-col items-center text-center hover:border-blue-300 transition-colors";
                item.innerHTML = `
                    <div class="w-12 h-12 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mb-4">
                        <i data-lucide="${res.icon}" class="w-6 h-6"></i>
                    </div>
                    <h4 class="font-bold text-gray-800 mb-1">${res.title}</h4>
                    <p class="text-xs text-gray-500 mb-4">${res.type} â€¢ ${res.size}</p>
                    <button onclick="downloadResource('${res.title}')" class="text-sm font-medium text-blue-600 hover:text-blue-800 flex items-center cursor-pointer">
                        <i data-lucide="download" class="w-4 h-4 mr-1"></i> Download
                    </button>
                `;
                container.appendChild(item);
            });
        }

        // --- Navigation Logic ---

        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-view').forEach(el => el.classList.add('hide'));
            // Show selected page
            document.getElementById(pageId).classList.remove('hide');
            
            // Update Title
            const titles = {
                'dashboard': 'Dashboard',
                'courses': 'My Courses',
                'assignments': 'Assignments',
                'resources': 'Resource Library'
            };
            document.getElementById('pageTitle').innerText = titles[pageId];

            // Update Sidebar Active State
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('text-blue-600', 'bg-blue-50', 'border-l-4', 'border-blue-600');
                el.classList.add('text-gray-600');
            });
            
            const activeNav = document.getElementById('nav-' + pageId);
            activeNav.classList.remove('text-gray-600');
            activeNav.classList.add('text-blue-600', 'bg-blue-50');

            // Close sidebar on mobile after selection
            if(window.innerWidth < 768) {
                document.getElementById('sidebar').classList.add('-translate-x-full');
            }
        }

        // --- Initialization ---

        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Lucide Icons
            lucide.createIcons();

            // Render Initial Data
            renderCourses('dashboard-courses-container', 2); // Show 2 on dashboard
            renderCourses('all-courses-container');
            renderAssignments();
            renderResources();

            // Mobile Sidebar Toggle
            const sidebar = document.getElementById('sidebar');
            document.getElementById('openSidebar').addEventListener('click', () => {
                sidebar.classList.remove('-translate-x-full');
            });
            document.getElementById('closeSidebar').addEventListener('click', () => {
                sidebar.classList.add('-translate-x-full');
            });

            // Handle Resize to reset sidebar state
            window.addEventListener('resize', () => {
                if(window.innerWidth >= 768) {
                    sidebar.classList.remove('-translate-x-full');
                } else {
                    sidebar.classList.add('-translate-x-full');
                }
            });
        });

    </script>
</body>
</html>